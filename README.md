# Task Time Tracker Chrome Extension

BacklogとGitHubのタスクの作業時間を自動で計測するChrome拡張機能です。

## 機能

- **自動時間計測**: タスクのステータス変更を自動検知して作業時間を計算
- **複数サービス対応**: Backlog、GitHub Issues/Projects に対応
- **最小限の操作**: 基本的に設定後は自動で動作
- **詳細レポート**: 日次・週次の作業時間サマリーを表示
- **カスタマイズ可能**: 計測対象ステータスの設定が可能

## 対応サービス

### Backlog
- *.backlog.jp
- *.backlog.com
- タスクのステータス変更を自動検知

### GitHub
- github.com
- Issues、Pull Requests、Projects の状態変更を検知

## インストール方法

### 1. 開発版インストール（推奨）

1. このリポジトリをクローンまたはダウンロード
```bash
git clone https://github.com/yourusername/task-time-tracker.git
cd task-time-tracker
```

2. Chromeの拡張機能管理画面を開く
   - Chrome で `chrome://extensions/` にアクセス
   - 右上の「デベロッパーモード」を有効にする

3. 拡張機能を読み込む
   - 「パッケージ化されていない拡張機能を読み込む」をクリック
   - ダウンロードしたフォルダを選択

### 2. 初期設定

1. 拡張機能アイコンをクリック
2. 「設定」ボタンをクリック
3. 計測開始ステータスを設定
   - **Backlog**: 「now」（デフォルト）
   - **GitHub**: 「now」（デフォルト）
   - ※このステータスから他のステータスに変わるまでの時間を自動計測

## 使用方法

### 基本的な使い方

1. 普段通りBacklogやGitHubでタスクを操作
2. ステータスを「now」に変更すると自動で計測開始
3. 「now」から他のステータスに変更すると自動で計測終了
4. 拡張機能アイコンで現在の状況を確認

### 時間の確認

- **拡張機能アイコン**: 実行中のタスク数をバッジ表示
- **ポップアップ**: 今日・今週の作業時間サマリー
- **レポート**: 詳細な作業時間レポート

## 設定

### ステータス設定

各サービスで計測対象とするステータスを設定できます：

- **開始ステータス**: カンマ区切りで複数指定可能
- **終了ステータス**: カンマ区切りで複数指定可能

### 通知設定

- タスク開始・終了時の通知のON/OFF
- ブラウザ通知で作業時間を表示

## ファイル構成

```
task-time-tracker/
├── manifest.json          # 拡張機能の設定
├── src/
│   ├── scripts/
│   │   ├── background.js      # バックグラウンド処理
│   │   ├── content-backlog.js # Backlog用コンテンツスクリプト
│   │   └── content-github.js  # GitHub用コンテンツスクリプト
│   ├── popup/
│   │   ├── popup.html         # ポップアップUI
│   │   ├── popup.css          # ポップアップスタイル
│   │   └── popup.js           # ポップアップロジック
│   └── icons/
│       ├── icon16.png         # 16x16アイコン
│       ├── icon48.png         # 48x48アイコン
│       └── icon128.png        # 128x128アイコン
├── 企画書.md
└── README.md
```

## 技術仕様

- **Manifest Version**: 3
- **Content Scripts**: 各サービスのページ監視
- **Background Script**: 時間計算とデータ管理
- **Storage**: Chrome Storage API（ローカル保存）
- **Permissions**: 
  - `storage`: 設定とデータの保存
  - `activeTab`: アクティブタブの情報取得
  - `scripting`: コンテンツスクリプトの注入

## データ保存

すべてのデータはユーザーの端末内にローカル保存されます：

- **設定データ**: ステータス設定、通知設定
- **時間ログ**: タスクごとの作業時間記録
- **アクティブタイマー**: 現在実行中のタスク情報

## トラブルシューティング

### 時間が計測されない場合

1. ステータス設定を確認
   - 実際のステータス名と設定が一致しているか
   - 大文字小文字、スペースが正確か

2. 対象ページで動作しているか確認
   - コンソールログを確認（F12 > Console）
   - 拡張機能が有効になっているか

### データが消えた場合

- Chrome Storage API を使用しているため、Chrome のデータ削除でリセットされる可能性があります
- 重要なデータは定期的にエクスポート機能（今後実装予定）でバックアップしてください

## 今後の改善予定

- [ ] データエクスポート機能
- [ ] 時間の手動調整機能
- [ ] より詳細なレポート機能
- [ ] 他のプロジェクト管理ツール対応
- [ ] 時間の可視化グラフ

## ライセンス

MIT License

## 貢献

バグ報告や機能要望は Issues でお願いします。プルリクエストも歓迎します。