<!DOCTYPE html>
<html>
<head>
    <title>Backlog Task Debug - TEST-123</title>
</head>
<body>
    <h1>Backlog Task Debug</h1>
    <p>テスト用ページ（file://でのデバッグ）</p>
    
    <div class="statusSelect">
        <label>Status:</label>
        <select id="statusSelect" name="statusSelect">
            <option value="未対応">未対応</option>
            <option value="処理中">処理中</option>
            <option value="now" selected>now</option>
            <option value="処理済み">処理済み</option>
        </select>
    </div>
    
    <h1 class="issue-title">Test Task Title</h1>
    <div class="project-name">Test Project</div>
    
    <button id="testButton">ステータス変更をテスト</button>
    <button id="toNowButton">「now」に変更</button>
    <button id="toCompletedButton">「処理済み」に変更</button>
    <div id="debugInfo"></div>
    
    <script>
        console.log('Debug page loaded, current URL:', window.location.href);
        
        let previousStatus = 'now';
        
        document.getElementById('statusSelect').addEventListener('change', function() {
            console.log('Status changed to:', this.value);
            document.getElementById('debugInfo').innerHTML = `ステータス変更: ${previousStatus} → ${this.value}`;
            previousStatus = this.value;
        });
        
        document.getElementById('testButton').addEventListener('click', function() {
            // 手動でステータス変更イベントをトリガー
            const select = document.getElementById('statusSelect');
            const event = new Event('change');
            select.dispatchEvent(event);
        });
        
        document.getElementById('toNowButton').addEventListener('click', function() {
            const select = document.getElementById('statusSelect');
            select.value = 'now';
            const event = new Event('change');
            select.dispatchEvent(event);
        });
        
        document.getElementById('toCompletedButton').addEventListener('click', function() {
            const select = document.getElementById('statusSelect');
            select.value = '処理済み';
            const event = new Event('change');
            select.dispatchEvent(event);
        });
    </script>
</body>
</html>